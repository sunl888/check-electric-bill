<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>ECharts Report</title>  
    <!-- 引入 ECharts 文件 -->  
        <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
    <!-- 引入 Papa Parse 用于解析 CSV 文件 -->  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>  
    <style>  
        /* 添加一些基本的样式 */  
        body {  
            font-family: Arial, sans-serif;  
            background-color: #f4f4f4;  
            margin: 0;  
            padding: 20px;  
        }  
        #main {  
            width: 100%;  
            max-width: 800px;  
            height: 500px;  
            margin: 0 auto;  
            background-color: #fff;  
            border-radius: 8px;  
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);  
        }  
    </style>  
</head>  
<body>  
    <!-- 准备一个 DOM 容器 -->  
    <div id="main"></div>  
    <script>  
        // 基于准备好的 DOM，初始化 echarts 实例  
        var myChart = echarts.init(document.getElementById('main'));  
   
        // 使用Papa Parse解析CSV文件  
        Papa.parse('data.csv', {  
            download: true,    
            complete: function(results) {  
                // 转换数据格式  
                var data = results.data.slice(1).map(function(row) {  
                    return [row[0], parseFloat(row[1])];  
                });  
                  console.log('数据：'+ data);
                // 指定图表的配置项和数据  
                var option = {  
                    title: {  
                        text: '电费报表',  
                        left: 'center',  
                        textStyle: {  
                            color: '#333',  
                            fontSize: 24,  
                            fontWeight: 'bold'  
                        }  
                    },  
                    tooltip: {  
                        trigger: 'axis',  
                        axisPointer: {  
                            type: 'cross'  
                        }  
                    },  
                    xAxis: {  
                        type: 'category',  
                        data: data.map(function(item) { return item[0]; })  
                        axisLine: {  
                            lineStyle: {  
                                color: '#333'  
                            }  
                        },  
                        axisLabel: {  
                            color: '#666',  
                            fontSize: 14  
                        },  
                        splitLine: {  
                            show: true,  
                            lineStyle: {  
                                color: '#eee'  
                            }  
                        }  
                    },  
                    yAxis: {  
                        type: 'value',  
                        axisLine: {  
                            lineStyle: {  
                                color: '#333'  
                            }  
                        },  
                        axisLabel: {  
                            color: '#666',  
                            fontSize: 14  
                        },  
                        splitLine: {  
                            show: true,  
                            lineStyle: {  
                                color: '#eee'  
                            }  
                        }  
                    },  
                    series: [{  
                        name: 'Value',  
                        type: 'line',  
                        data: data.map(function(item) { return item[1]; })  ,
                        smooth: true, // 使线条平滑  
                        itemStyle: {  
                            color: '#1f77b4', // 自定义线条颜色  
                            lineWidth: 2  
                        },  
                        label: {  
                            show: true,  
                            position: 'top',  
                            formatter: '{c}',  
                            color: '#333',  
                            fontSize: 12  
                        },  
                        areaStyle: {  
                            color: 'rgba(31, 119, 180, 0.2)' // 填充区域颜色  
                        }  
                    }]  
                };  
  
                // 使用刚指定的配置项和数据显示图表。  
                myChart.setOption(option);  
            },  
            error: function(error) {  
                console.error('Error parsing CSV:', error);  
            }  
        });  
    </script>  
</body>  
</html>
